openapi: 3.0.1
info:
  title: test
  description: test desc
  version: 1.0.0
#servers:
#  -   url: /api/v1
tags:
  -   name: testapi
      description: test things
paths:
  /test:
    post:
      tags:
        - testapi
      summary: test thing
      description: is best to test things
      operationId: test
      parameters:
        -   in: header
            description: timeout desc
            name: timeout
            schema:
              type: string
              # date-time in header didn't work, since generator forget to specify format in generated code
              # Seems like a bug in generator, since it does work in request bodies.
            required: false
      requestBody:
        description: problem model
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Problem'
      responses:
        '200':
          description: successful operation
components:
  schemas:
    HourValuePair:
      type: object
      required:
        - hour
        - value
      properties:
        hour:
          type: string
          format: date-time
        value:
          type: number
          format: double
    NodeType:
      type: string
      enum:
        - A
        - 'N'
        - H
    Node:
      type: object
      required:
        - id
        - nodeType
        - constraints
      properties:
        id:
          type: integer
          format: int64
        type:
          $ref: '#/components/schemas/NodeType'
        constraints:
          type: array
          items:
            $ref: '#/components/schemas/HourValuePair'
    Problem:
      type: object
      required:
        - start
        - end
        - constantS
        - nodes
      properties:
        start:
          type: string
          format: date-time
        end:
          type: string
          format: date-time
        constantS:
          type: number
          format: double
        nodes:
          type: array
          items:
            $ref: '#/components/schemas/Node'
